"use strict";(self.webpackChunkomnitab=self.webpackChunkomnitab||[]).push([[765],{71247:(e,n,t)=>{t.d(n,{Z:()=>c});var i=t(23645),o=t.n(i)()((function(e){return e[1]}));o.push([e.id,"\n/*/deep/ .el-input__inner::placeholder {\n  color: rgba(153, 153, 153, var(--inputO));\n}*/\n",""]);const c=o},6765:(e,n,t)=>{t.r(n),t.d(n,{default:()=>ae});var i=t(9642),o=(t(12522),t(41809)),c=(t(96152),t(66252)),a=t(56612),s=t(49963),l=function(e){return(0,c.dD)("data-v-65b9f3ea"),e=e(),(0,c.Cn)(),e},r={class:"search-type-icon"},u=["src"],d={class:"search-icon"},h={class:"icon-item-box"},m=["onClick"],p=["src"],f={class:"item-name"},g=["onClick"],v=["onClick"],w=["src"],C={class:"item-name"},S=["onClick"],_=[l((function(){return(0,c._)("i",{class:"iconfont icon-jiahao"},null,-1)}))],b=["onMousedown","innerHTML"],k={class:"search-edit-title"},y={class:"search-edit-desc"},L={class:"search-edit-desc-title"},I={class:"search-edit-desc-info"},H={class:"search-edit-list"},D=["onClick"],x=["src"],T={class:"item-name"},z=l((function(){return(0,c._)("i",{class:"iconfont icon-duihao"},null,-1)})),q={class:"search-edit-desc"},M={class:"search-edit-desc-title"},E={class:"search-edit-desc-info"},A={class:"search-edit-list"},V=["onClick"],$={class:"edit-custom"},U=l((function(){return(0,c._)("i",{class:"iconfont icon-a-3gedian"},null,-1)})),F={class:"edit-icons"},K=["onClick"],N=["onClick"],j=["src"],P={class:"item-name"},W=l((function(){return(0,c._)("i",{class:"iconfont icon-duihao"},null,-1)})),Z=[l((function(){return(0,c._)("i",{class:"iconfont icon-jiahao"},null,-1)}))],Y={class:"search-add-title"},B=["placeholder"],O={class:"search-add-title"},J=["placeholder"],R={class:"btns"};var G=t(2262),Q=t(93971),X=t(9669),ee=t.n(X);const ne=(0,c.aZ)({name:"searchIcon",props:{className:{type:String,default:""},boxClassName:{type:String,default:""}},setup:function(e,n){var t,i,o=function(e){return chrome.i18n.getMessage(e)},a=(0,G.iH)(null),s=0,l=(0,G.iH)({show:!1,add:!1,name:"",url:""}),r=(0,G.iH)(!1),u=(0,G.iH)(""),d=(0,G.iH)({nowSearch:{id:2,name:"baidu",permissions:"https://www.baidu.com/",url:"https://www.baidu.com/s?ie=UTF-8&wd={S}",icon:"https://img.omnitab.link/search/baidu.png"},selectList:[{id:2,name:"baidu",permissions:"https://www.baidu.com/",url:"https://www.baidu.com/s?ie=UTF-8&wd={S}",icon:"https://img.omnitab.link/search/baidu.png",enSort:5},{id:3,name:"bing",permissions:"https://www.bing.com/",url:"https://www.bing.com/search?q={S}",icon:"https://img.omnitab.link/search/bing.png",enSort:1},{id:4,name:"fsou",permissions:"https://fsoufsou.com/",url:"https://fsoufsou.com/search?q={S}",icon:"https://img.omnitab.link/search/fsou.png",enSort:8},{id:5,name:"google",permissions:"https://www.google.com/",url:"https://www.google.com/search?ie=UTF-8&q={S}",icon:"https://img.omnitab.link/search/google.png",enSort:0},{id:6,name:"sougou",permissions:"https://www.sogou.com/",url:"https://www.sogou.com/web?query={S}",icon:"https://img.omnitab.link/search/sougou.png",enSort:6},{id:7,name:"360",permissions:"https://www.so.com/",url:"https://www.so.com/s?ie=utf-8&q={S}",icon:"https://img.omnitab.link/search/360.png",enSort:7},{id:8,name:"yandex",permissions:"https://yandex.com/",url:"https://yandex.com/search/?text={S}",icon:"https://img.omnitab.link/search/yandex.png",enSort:4},{id:9,name:"yahoo",permissions:"https://search.yahoo.com/",url:"https://search.yahoo.com/search?p={S}",icon:"https://img.omnitab.link/search/yahoo.png",enSort:2},{id:10,name:"duckduckgo",permissions:"https://duckduckgo.com/",url:"https://duckduckgo.com/?q={S}",icon:"https://img.omnitab.link/search/duckduckgo.png",enSort:3},{id:11,name:"github",permissions:"https://github.com/",url:"https://github.com/search?q={S}",icon:"https://img.omnitab.link/search/github.png",enSort:9}],customList:[],iconListH:0});chrome.storage.local.get(["search","searchList","searchCustomList"],(function(e){if(d.value.nowSearch=e.search,e.searchList)d.value.selectList=e.searchList,d.value.customList=e.searchCustomList;else{"编辑"!==o("menuEdit")&&(d.value.selectList=d.value.selectList.sort((function(e,n){return e.enSort-n.enSort})));for(var n=0;n<4;n++)d.value.selectList[n].selected=!0;w()}}));var h="",m=(0,G.iH)(""),p=(0,G.iH)(0),f=(0,G.iH)(-1),g=(0,G.iH)([]);function v(){d.value.iconListH=0,t&&t.remove&&t.remove(),t=""}function w(){chrome.storage.local.set({popupAdded:(new Date).getTime(),searchList:Array.from(d.value.selectList),searchCustomList:Array.from(d.value.customList)},(function(){n.emit("setCreatedTime")}))}var C=function e(n){return n.offsetParent?n.offsetTop+e(n.offsetParent):n.offsetTop},S=function(e,n,t){e.length>0?ee()({methods:"get",url:"https://www.baidu.com/sugrec?ie=utf-8&json=1&prod=pc&from=pc_web",params:{wd:e},timeout:3e3}).then((function(e){e.data.g?n(e.data.g.map((function(e){return{value:e.q}}))):t()})).catch((function(e){t()})):_(e,n,t)},_=function(e,n,t){e.length>0?ee()({methods:"get",url:"https://www.google.com/complete/search?client=gws-wiz&xssi=t",params:{q:e},timeout:3e3}).then((function(e){try{var i=JSON.parse(e.data.replace(/^\)]}'/,""));n(i[0].map((function(e){return{value:e[0]}})))}catch(e){t()}})).catch((function(e){t()})):t()},b=function(e,n,t){e.length>0?ee()({methods:"get",url:"https://www.baidu.com/sugrec?ie=utf-8&json=1&prod=pc&from=pc_web",params:{wd:e},timeout:3e3}).then((function(e){e.data.g?n(e.data.g.map((function(e){return{value:e.q}}))):t()})).catch((function(e){t()})):t()},k=function(e){var n=++s;h=e,f.value=-1,function(e,n,t){chrome.storage.local.get("search",(function(i){"https://img.omnitab.link/search/browser.png"===i.search.icon?S(e,n,t):"google"===i.search.name?_(e,n,t):b(e,n,t)}))}(e,(function(e){n===s&&(g.value=e)}),(function(){n===s&&(g.value=[])}))};return(0,c.bv)((function(){document.querySelector(".el-input__inner").addEventListener("input",(function(e){k(e.target.value)}))})),{modelValue:m,popperH:p,suggestions:g,highlightedIndex:f,aniClass:u,inputEnter:function(e){e&&229===e.keyCode||(a.value.blur(),n.emit("inputEnter",m.value),m.value="",g.value=[])},itemClick:function(e){n.emit("itemClick",e),m.value="",g.value=[]},highlight:function(e){if(e<0?-1===e?(f.value=-1,m.value=h):(f.value=g.value.length-1,m.value=g.value[f.value].value):e===g.value.length?(f.value=-1,m.value=h):(f.value=e,m.value=g.value[e].value),f.value>-1){n.emit("highlight",g.value[f.value]);var t=document.querySelector(".main-input-popper");33*f.value+33>t.offsetHeight+t.scrollTop?t.scrollTop+=33:33*f.value<t.scrollTop&&(t.scrollTop-=33)}},showPopper:function(){u.value="loaded",r.value=!0,m.value.length>0&&k(m.value);var e=document.querySelector(".main-input-popper"),n=C(e);window.innerHeight-n>300?p.value=300:p.value=window.innerHeight-n,v()},querySearchAsync:k,changeDefaultUrl:function(e){m.value=e},popperBlur:function(){r.value=!1,f.value=-1,p.value=0,f.value=-1,setTimeout((function(){}),200)},changeSearchIcon:function(e){d.value.nowSearch=e,chrome.storage.local.set({popupAdded:(new Date).getTime(),search:e},(function(){n.emit("setCreatedTime")})),v()},showSearchIcon:function(){u.value="loaded";var e=document.querySelector(".change-search-icon");d.value.iconListH=window.innerHeight-C(e),t?v():((t=document.createElement("div")).style.position="absolute",t.style.zIndex="9",t.style.top="0",t.style.left="0",t.style.right="0",t.style.bottom="0",t.addEventListener("click",(function(){v()})),document.body.appendChild(t))},searchIconConfig:d,mainInputDom:a,mainInputActive:r,editConfig:l,addCustomSearch:function(){l.value.name="",l.value.url="",l.value.add=!0},handleEdit:function(){l.value.show=!0},addSearch:function(){l.value.name&&l.value.url?l.value.url.indexOf("{S}")<0?(0,Q.z8)({showClose:!0,message:o("addSearchRuleInfo"),type:"warning"}):(i?(i.name=l.value.name,i.url=l.value.url,i.id===d.value.nowSearch.id&&chrome.storage.local.set({popupAdded:(new Date).getTime(),search:i},(function(){n.emit("setCreatedTime")}))):d.value.customList.push({id:(new Date).getTime(),name:l.value.name,permissions:"",url:l.value.url,icon:"https://img.omnitab.link/search/browser.png"}),w(),l.value.add=!1,i=""):(0,Q.z8)({showClose:!0,message:o("addSearchNullInfo"),type:"warning"})},selectSearchList:function(e){e.selected=!e.selected,w()},editSearch:function(e){i=e,l.value.name=i.name,l.value.url=i.url,l.value.add=!0},deleteSearch:function(e){d.value.customList=d.value.customList.filter((function(n){return n.id!==e.id})),w()},cancelAddSearch:function(){l.value.add=!1,i=""}}}});var te=t(93379),ie=t.n(te),oe=t(71247),ce={insert:"head",singleton:!1};ie()(oe.Z,ce);oe.Z.locals;const ae=(0,t(83744).Z)(ne,[["render",function(e,n,t,l,G,Q){var X=o.EZ,ee=i.d0;return(0,c.wg)(),(0,c.iD)("div",{class:(0,a.C_)(e.boxClassName+" "+(e.mainInputActive?"main-input-active":"")),onWheel:n[17]||(n[17]=(0,s.iM)((function(){}),["stop"])),onContextmenu:n[18]||(n[18]=(0,s.iM)((function(e){}),["stop"])),style:(0,a.j5)("\n  position: relative;\n  --mainInputH: "+e.popperH+"px;\n  --mainInputIconH: "+e.searchIconConfig.iconListH+"px\n  ")},[(0,c.Wm)(X,{modelValue:e.modelValue,"onUpdate:modelValue":n[0]||(n[0]=function(n){return e.modelValue=n}),clearable:"",ref:"mainInputDom",size:"small",placeholder:e.$tr("searchHolder"),class:(0,a.C_)(e.className+" "+e.aniClass),onFocus:e.showPopper,onBlur:e.popperBlur,onInput:e.querySearchAsync,onClear:n[1]||(n[1]=function(n){return e.suggestions=[]}),onKeydown:[(0,s.D2)(e.inputEnter,["enter","native"]),n[2]||(n[2]=(0,s.D2)((0,s.iM)((function(n){return e.highlight(e.highlightedIndex-1)}),["prevent"]),["up"])),n[3]||(n[3]=(0,s.D2)((0,s.iM)((function(n){return e.highlight(e.highlightedIndex+1)}),["prevent"]),["down"]))]},null,8,["modelValue","placeholder","class","onFocus","onBlur","onInput","onKeydown"]),(0,c._)("div",r,[(0,c._)("img",{src:e.searchIconConfig.nowSearch.icon,onClick:n[4]||(n[4]=function(){return e.showSearchIcon&&e.showSearchIcon.apply(e,arguments)}),alt:""},null,8,u),(0,c._)("i",{class:"iconfont icon-xiala",onClick:n[5]||(n[5]=function(){return e.showSearchIcon&&e.showSearchIcon.apply(e,arguments)})})]),(0,c._)("div",d,[(0,c._)("i",{class:"iconfont icon-sousuo1",onClick:n[6]||(n[6]=function(){return e.inputEnter&&e.inputEnter.apply(e,arguments)})})]),(0,c._)("div",{class:"change-search-icon",onWheel:n[8]||(n[8]=(0,s.iM)((function(){}),["stop"]))},[(0,c._)("div",h,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.searchIconConfig.selectList,(function(n){return(0,c.wy)(((0,c.wg)(),(0,c.iD)("div",{class:"icon-item",onClick:function(t){return e.changeSearchIcon(n)}},[(0,c._)("img",{src:n.icon},null,8,p),(0,c._)("span",f,(0,a.zw)(n.name),1),(0,c._)("i",{class:"iconfont icon-shanchu1 delete-btn",onClick:(0,s.iM)((function(t){return e.selectSearchList(n)}),["stop"])},null,8,g)],8,m)),[[s.F8,n.selected]])})),256)),((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.searchIconConfig.customList,(function(n){return(0,c.wy)(((0,c.wg)(),(0,c.iD)("div",{class:"icon-item",onClick:function(t){return e.changeSearchIcon(n)}},[(0,c._)("img",{src:n.icon},null,8,w),(0,c._)("span",C,(0,a.zw)(n.name),1),(0,c._)("i",{class:"iconfont icon-shanchu1 delete-btn",onClick:(0,s.iM)((function(t){return e.selectSearchList(n)}),["stop"])},null,8,S)],8,v)),[[s.F8,n.selected]])})),256)),(0,c._)("div",{class:"icon-item",onClick:n[7]||(n[7]=function(n){return e.handleEdit()})},_)])],32),(0,c._)("div",{class:"main-input-popper",onWheel:n[9]||(n[9]=(0,s.iM)((function(){}),["stop"]))},[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.suggestions,(function(n,t){return(0,c.wg)(),(0,c.iD)("div",{class:(0,a.C_)(["list-item",{highlighted:e.highlightedIndex===t}]),onMousedown:(0,s.iM)((function(t){return e.itemClick(n)}),["left"]),innerHTML:n.value},null,42,b)})),256))],32),(0,c.Wm)(ee,{modelValue:e.editConfig.show,"onUpdate:modelValue":n[11]||(n[11]=function(n){return e.editConfig.show=n}),class:"search-edit-dialog custom-dialog","destroy-on-close":""},{default:(0,c.w5)((function(){return[(0,c._)("div",k,(0,a.zw)(e.$tr("searchEditTitle")),1),(0,c._)("div",y,[(0,c._)("span",L,(0,a.zw)(e.$tr("all")),1),(0,c._)("span",I,(0,a.zw)(e.$tr("searchEditDescInfo")),1)]),(0,c._)("div",H,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.searchIconConfig.selectList,(function(n){return(0,c.wg)(),(0,c.iD)("div",{class:(0,a.C_)(["search-icon-item",{selected:n.selected}]),onClick:function(t){return e.selectSearchList(n)}},[(0,c._)("img",{src:n.icon},null,8,x),(0,c._)("span",T,(0,a.zw)(n.name),1),z],10,D)})),256))]),(0,c._)("div",q,[(0,c._)("span",M,(0,a.zw)(e.$tr("custom")),1),(0,c._)("span",E,(0,a.zw)(e.$tr("searchEditDescInfo2")),1)]),(0,c._)("div",A,[((0,c.wg)(!0),(0,c.iD)(c.HY,null,(0,c.Ko)(e.searchIconConfig.customList,(function(n){return(0,c.wg)(),(0,c.iD)("div",{class:(0,a.C_)(["search-icon-item",{selected:n.selected}]),onClick:function(t){return e.selectSearchList(n)}},[(0,c._)("div",$,[U,(0,c._)("div",F,[(0,c._)("i",{class:"iconfont icon-bianji",onClick:(0,s.iM)((function(t){return e.editSearch(n)}),["stop"])},null,8,K),(0,c._)("i",{class:"iconfont icon-shanchu",onClick:(0,s.iM)((function(t){return e.deleteSearch(n)}),["stop"])},null,8,N)])]),(0,c._)("img",{src:n.icon},null,8,j),(0,c._)("span",P,(0,a.zw)(n.name),1),W],10,V)})),256)),(0,c._)("div",{class:"search-icon-item",style:{border:"1px dashed #dcdcdc"},onClick:n[10]||(n[10]=function(){return e.addCustomSearch&&e.addCustomSearch.apply(e,arguments)})},Z)])]})),_:1},8,["modelValue"]),(0,c.Wm)(ee,{modelValue:e.editConfig.add,"onUpdate:modelValue":n[16]||(n[16]=function(n){return e.editConfig.add=n}),class:"search-add-dialog","destroy-on-close":""},{default:(0,c.w5)((function(){return[(0,c._)("div",Y,(0,a.zw)(e.$tr("searchAddTitle")),1),(0,c.wy)((0,c._)("input",{"onUpdate:modelValue":n[12]||(n[12]=function(n){return e.editConfig.name=n}),placeholder:e.$tr("searchNamePlaceholder"),type:"text"},null,8,B),[[s.nr,e.editConfig.name]]),(0,c._)("div",O,(0,a.zw)(e.$tr("searchAddTitle2")),1),(0,c.wy)((0,c._)("textarea",{"onUpdate:modelValue":n[13]||(n[13]=function(n){return e.editConfig.url=n}),placeholder:e.$tr("searchUrlPlaceholder")},null,8,J),[[s.nr,e.editConfig.url]]),(0,c._)("div",R,[(0,c._)("div",{class:"cancel",onClick:n[14]||(n[14]=function(){return e.cancelAddSearch&&e.cancelAddSearch.apply(e,arguments)})},(0,a.zw)(e.$tr("cancel")),1),(0,c._)("div",{class:"confirm",onClick:n[15]||(n[15]=function(){return e.addSearch&&e.addSearch.apply(e,arguments)})},(0,a.zw)(e.$tr("confirm")),1)])]})),_:1},8,["modelValue"])],38)}],["__scopeId","data-v-65b9f3ea"]])}}]);